<section style="background-color: ghostwhite; min-height: 100vh">

    <div class="container-fluid">
        <div class="row">
            <div class="col-12">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-2 d-sm-block d-none">
                            <app-side-navigation></app-side-navigation>
                        </div>
                        <div class="col-10">
                            <div class="container-fluid">
                                <div class="jumbotron jumbotron-fluid" style="background-color: transparent;padding-bottom: 10px">
                                    <div class="container">
                                        <h1 class="display-5">Herzlich Willkommen</h1>
                                        <p class="lead">This is a modified jumbotron that occupies the entire horizontal space of its parent.</p>
                                    </div>
                                </div>
                                    <div class="row shadow p-2 mb-1 bg-white" style="border-bottom: solid darkgoldenrod 3px" *ngIf="customer !== undefined">
                                        <div class="col-2">
                                            <img src="../../../assets/avatar.png" class="img-responsive" width="100%">
                                        </div>
                                        <div class="col-5">
                                            <small style="color: grey">Name</small>
                                            <input type="text" class="form-control" name="name" [(ngModel)]="customer.name">
                                            <small style="color: grey">E-Mail</small>
                                            <input type="text" class="form-control" name="mail" [(ngModel)]="customer.mail">
                                            <small style="color: grey">Geburtstag</small>
                                            <input type="date" class="form-control" name="birthday" [(ngModel)]="customer.birthday">
                                        </div>
                                        <div class="col-5">
                                            <small style="color: grey">Telefon</small>
                                            <input type="text" class="form-control" name="phoneNumber" [(ngModel)]="customer.phoneNumber">
                                            <small style="color: grey">Wohnort</small>
                                            <input type="text" class="form-control" name="town" [(ngModel)]="customer.town">
                                            <small style="color: grey">K-Nummer</small>
                                            <input type="text" class="form-control" name="customerNumber" [(ngModel)]="customer.customerNumber">
                                        </div>
                                        <div class="col-12">
                                            <button class="btn btn-info float-right m-2" (click)="updateCustomer()">Updaten</button>
                                        </div>
                                    </div>

                                <div class="row py-3">
                                    <div class="container-fluid">
                                        <div class="col-12">
                                            <ul class="nav justify-content-end">
                                                <li class="nav-item p-1">
                                                    <button class="nav-link btn btn-secondary" style="background-color: lightslategrey;border-radius: 0px; border: solid white 0px">
                                                        <i class="fas fa-envelope" style="color: orange;"></i>
                                                        Kontaktieren
                                                    </button>
                                                </li>
                                                <li class="nav-item p-1">
                                                    <button class="nav-link btn btn-secondary" style="background-color: lightslategrey;border-radius: 0px; border: solid white 0px">
                                                        <i class="fas fa-envelope" style="color: orange;"></i>
                                                        Vorlage senden
                                                    </button>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="row py-2">
                                    <div class="col-4 text-center">
                                        <div class="card shadow p-2 mb-2 bg-white" style="border-bottom: solid darkgoldenrod 4px">
                                            <small style="font-weight: 200;color: grey">Insgesamt</small>
                                            <h4>{{customerRevenue}} €</h4>
                                        </div>
                                    </div>
                                    <div class="col-4 text-center">
                                        <div class="card shadow p-2 mb-2 bg-white" style="border-bottom: solid darkgoldenrod 4px">
                                            <small style="font-weight: 200;color: grey">Umsatz pro Kauf</small>
                                        <h4>{{(customerRevenue / customerPurchases).toFixed(0)}} €</h4>
                                        </div>
                                    </div>
                                    <div class="col-4 text-center">
                                        <div class="card shadow p-2 mb-2 bg-white" style="border-bottom: solid darkgoldenrod 4px">
                                            <small style="font-weight: 200;color: grey">Einkäufe</small>
                                            <h4>{{customerPurchases}}</h4>
                                        </div>
                                    </div>
                                </div>



                                <div class="row py-1">
                                    <div class="container-fluid" style="opacity: 0.5">
                                        <div class="row" style="display: none">
                                            <div class="col-4">
                                                <h5 class="py-1" style="color: darkgoldenrod;font-size: 20px;font-weight: 300">Letzte Systemmailings</h5>
                                            </div>
                                        </div>
                                        <div class="row" style="display: none">
                                            <div class="col-4">
                                                <div class="media shadow p-2 mb-1 bg-white rounded" style="background-color: white;border-bottom: solid orange 3px">
                                                    <i class="fas fa-envelope m-3" style="color: orange;font-size: 30px"></i>
                                                    <div class="media-body m-2">
                                                        <small class="float-right">19.02.1996</small>
                                                        <h6 class="mt-0">Max Mustermann</h6>
                                                        <p>Reichenbach</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="media shadow p-2 mb-1 bg-white rounded" style="background-color: white;border-bottom: solid orange 3px">
                                                    <i class="fas fa-envelope m-3" style="color: orange;font-size: 30px"></i>
                                                    <div class="media-body m-2">
                                                        <small class="float-right">19.02.1996</small>
                                                        <h6 class="mt-0">Max Mustermann</h6>
                                                        <p>Reichenbach</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-4">
                                                <div class="media shadow p-2 mb-1 bg-white rounded" style="background-color: white;border-bottom: solid orange 3px">
                                                    <i class="fas fa-envelope m-3" style="color: orange;font-size: 30px"></i>
                                                    <div class="media-body m-2">
                                                        <small class="float-right">19.02.1996</small>
                                                        <h6 class="mt-0">Max Mustermann</h6>
                                                        <p>Reichenbach</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row py-2">
                                    <div class="col-12">
                                        <div class="card shadow p-3 mb-5 bg-white rounded" style="border-radius: 0px;border: solid white 0px">
                                            <div class="card-body" style="border-radius: 0px;border: solid white 0px">
                                                <h5 class="card-title" style="font-weight: 300;color: darkgoldenrod;font-size: 18px">Einkäufe in den letzten 12 Monaten</h5>
                                                <div style="width: 8.3%;float: left;border-bottom: solid darkgoldenrod 2px;background-color: white;"
                                                     *ngFor="let stat of statPurchasesPerMonth;let i = index">
                                                    <div class="progress progress-bar-vertical"  style="background-color: white;height: 200px">
                                                        <div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" [ngStyle]="{'height' : stat[1]+'%' }"
                                                             style="background-color: lightseagreen">
                                                        </div>
                                                    </div>
                                                </div>
                                                <small class="float-left" style="color: lightslategrey">02.04.2019</small>
                                                <small class="float-right" style="color: lightslategrey">Heute</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12">
                                        <div class="card shadow p-3 mb-5 bg-white rounded" style="border-radius: 0px;border: solid white 0px">
                                            <div class="card-body" style="border-radius: 0px;border: solid white 0px">
                                                <h5 class="card-title" style="font-weight: 300;color: darkgoldenrod;font-size: 18px">Verkaufsanteil der Marken</h5>
                                                <div class="container-fluid">
                                                    <div class="row" *ngFor="let item of brandMapArray" style="margin-bottom: 10px">
                                                        <div class="col-3 text-right">
                                                            <h6 style="font-weight: 300;color: lightslategrey">{{item[0]}}</h6>
                                                        </div>
                                                        <div class="col-9">
                                                            <div class="progress">
                                                                <div class="progress-bar" role="progressbar" style="width: 100%;background-color: darkseagreen"
                                                                     aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"
                                                                     [ngStyle]="{'width' : item[1]/customerRevenue*100+'%' }">{{(item[1]/customerRevenue*100).toFixed(0)}}%
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-12">
                                        <div class="card shadow p-3 mb-5 bg-white rounded" style="border-radius: 0px;border: solid white 0px">
                                            <div class="card-body" style="border-radius: 0px;border: solid white 0px">
                                                <h5 class="card-title" style="font-weight: 300;color: darkgoldenrod;font-size: 18px">Verkaufsanteil der Produke</h5>
                                                <div class="container-fluid">
                                                    <div class="row" *ngFor="let item of typeMapArray" style="margin-bottom: 10px">
                                                        <div class="col-3 text-right">
                                                            <h6 style="font-weight: 300;color: lightslategrey">{{item[0]}}</h6>
                                                        </div>
                                                        <div class="col-9">
                                                            <div class="progress">
                                                                <div class="progress-bar" role="progressbar" style="width: 100%;background-color: darkseagreen"
                                                                     aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"
                                                                     [ngStyle]="{'width' : item[1]/customerItems*100+'%' }">{{(item[1]/customerItems*100).toFixed(0)}}%
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>


                                <div class="row">
                                    <div class="col-12">
                                        <h5>Einkäufe</h5>
                                        <table class="table table-hover shadow p-2 mb-2 bg-white">
                                            <thead>
                                            <tr style="color: grey">
                                                <th scope="col">Kunde</th>
                                                <th scope="col">Umsatz</th>
                                                <th scope="col">Teile</th>
                                                <th scope="col">Datum</th>
                                            </tr>
                                            </thead>
                                            <tbody>
                                                <tr *ngFor="let p of purchases" routerLink="/purchase/{{p.id}}">
                                                    <td>{{p.customerName}}</td>
                                                    <td><span class="badge badge-pill" style="font-weight: 300;background-color: lightseagreen;color: white">{{p.price}} €</span></td>
                                                    <td>{{p.itemType.length}}</td>
                                                    <td>{{p.creationDate.toDate() | date: 'dd.MM.yyyy'}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
